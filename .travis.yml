language: java
jdk:
  - oraclejdk8
services:
  - mysql
before_install:
  - gem install bundler
  - pip install --user codecov
install:
  - bundle install
  - cd coin-selfservice-standalone && npm install && cd ..
  - mvn install -DskipTests=true -Dmaven.javadoc.skip=true -B -V
before_script:
  - mysql -e "create database csa default charset set utf8;
    create user 'csa'@'localhost' identified by 'csa';
    grant all on csa.* to 'csa'@'localhost';" -uroot
  - "export DISPLAY=:99.0"
  - "sh -e /etc/init.d/xvfb start"
  - sleep 3 # give xvfb some time to start
script:
  - mvn verify -Pselenium -B
after_success:
  - codecov
# - wget http://build.surfconext.nl/resources/settings.xml
# - mvn clean deploy --settings settings.xml
